(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{363:function(e,t,a){e.exports=a(567)},368:function(e,t,a){},390:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},391:function(e,t,a){},529:function(e,t){},567:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(26),r=a.n(s),o=(a(368),a(3)),l=a(24),i=a.n(l),u=a(49),m=a.n(u),d=(a(188),a(35)),g=(a(390),a(391),a(28)),p=a.n(g),f=a(62),h=a.n(f),b=a(632),E=a(86),v=a(336),O=a(631),j=a(18),k=(a(60),new p.a),y=function(){var e=c.a.useContext(Et),t=e.accesstoken,a=e.user,s=Object(n.useState)([]),r=Object(o.a)(s,2),l=r[0],i=r[1],u=Object(n.useState)([]),m=Object(o.a)(u,2),d=m[0],g=m[1],p=Object(n.useState)([]),f=Object(o.a)(p,2),h=f[0],y=f[1],S=Object(E.a)(Array(20).keys()),w=Object(n.useState)(S),x=Object(o.a)(w,2),C=x[0];x[1];k.setAccessToken(t),Object(n.useEffect)(function(){if(a)for(var e=function(e){k.getArtist(a.favoriteartists[e]).then(function(t){A.push(t.name),T.push(t.images[0].url),R.push(a.favoriteartists[e]),20==A.length&&(i(A),g(T),y(R))}).catch(function(e){return console.log(e)})},t=0;t<a.favoriteartists.length;t++)e(t)},[a]);var A=[],T=[],R=[];var N=function(e){var t=e.id,a=l[t],n=d[t];return n?c.a.createElement("div",{key:t.toString(),id:t},c.a.createElement(j.b,{to:"/artist/".concat(h[t])},c.a.createElement(v.a,{rounded:!0,src:n,verticalAlign:"middle"}),c.a.createElement(O.a,{size:"huge"},a)),c.a.createElement("br",null)):"null"};function M(e){var t=l[e],a=d[e];return a?c.a.createElement("div",{key:e.toString(),id:e},c.a.createElement(j.b,{to:"/artist/".concat(h[e])},c.a.createElement(v.a,{rounded:!0,src:a,verticalAlign:"middle"}),c.a.createElement(O.a,{size:"huge"},t)),c.a.createElement("br",null)):"null"}return c.a.createElement("div",{className:"FavoriteArtists "},c.a.createElement(O.a,{size:"huge"},"Top Artists"),c.a.createElement(b.a.Row,null,d.length>15?C.slice(0,2).map(function(e){return c.a.createElement(N,{key:e.toString(),id:e})}):""),c.a.createElement(b.a.Row,null,d.length>15?C.slice(2,4).map(function(e){return c.a.createElement(N,{key:e.toString(),id:e})}):""),c.a.createElement(b.a.Row,null,d.length>15?C.slice(4,6).map(function(e){return c.a.createElement(N,{key:e.toString(),id:e})}):""),c.a.createElement(b.a.Row,null,d.length>15?C.slice(6,10).map(function(e){return M(e)}):""),c.a.createElement(b.a.Row,null,d.length>19?C.slice(10,14).map(function(e){return M(e)}):""),c.a.createElement(b.a.Row,null,d.length>19?C.slice(14,21).map(function(e){return function(e){var t=l[e],a=d[e];return a?c.a.createElement("div",{key:e.toString(),id:e},c.a.createElement(j.b,{to:"/artist/".concat(h[e])},c.a.createElement(v.a,{fluid:!0,rounded:!0,src:a,verticalAlign:"middle"}),c.a.createElement(O.a,{size:"large"},t)),c.a.createElement("br",null)):"null"}(e)}):""))},S=(a(60),new p.a),w=function(e){e.songs,e.refreshtoken;var t=Object(n.useContext)(Et),a=t.accesstoken,s=t.user,r=Object(n.useState)([]),l=Object(o.a)(r,2),i=l[0],u=l[1],m=Object(n.useState)([]),d=Object(o.a)(m,2),g=d[0],p=d[1],f=Object(n.useState)([]),h=Object(o.a)(f,2),k=h[0],y=h[1],w=Object(E.a)(Array(20).keys()),x=Object(n.useState)(w),C=Object(o.a)(x,2),A=C[0];C[1];S.setAccessToken(a),Object(n.useEffect)(function(){if(console.log(s),s)for(var e=function(e){S.getTrack(s.favoritesongs[e]).then(function(t){T.push(t.name),R.push(t.album.images[0].url),N.push(s.favoritesongs[e]),20==T.length&&(u(T),p(R),y(N))}).catch(function(e){return console.log(e)})},t=0;t<s.favoritesongs.length;t++)e(t)},[s]);var T=[],R=[],N=[];var M=function(e){var t=e.id,a=i[t],n=g[t];return n?c.a.createElement(b.a.Column,{key:t.toString(),mobile:16,tablet:8,computer:8,id:t},c.a.createElement(j.b,{to:"/track/".concat(k[t])},c.a.createElement(v.a,{size:"huge",rounded:!0,verticalAlign:"middle",src:n}),c.a.createElement(O.a,{size:"huge"},a)),c.a.createElement("br",null)):"null"};function I(e){var t=i[e],a=g[e];return a?c.a.createElement(b.a.Column,{key:e.toString(),mobile:16,tablet:8,computer:4,id:e},c.a.createElement(j.b,{to:"/track/".concat(k[e])},c.a.createElement(v.a,{rounded:!0,src:a,verticalAlign:"middle"}),c.a.createElement(O.a,{size:"huge"},t)),c.a.createElement("br",null)):"null"}return c.a.createElement("div",{className:"FavoriteArtists "},c.a.createElement(O.a,{size:"huge"},"Top Songs"),c.a.createElement(b.a.Row,null,g.length>15?A.slice(0,2).map(function(e){return c.a.createElement(M,{key:e.toString(),id:e})}):""),c.a.createElement(b.a.Row,null,g.length>15?A.slice(2,4).map(function(e){return c.a.createElement(M,{key:e.toString(),id:e})}):""),c.a.createElement(b.a.Row,null,g.length>15?A.slice(4,6).map(function(e){return c.a.createElement(M,{key:e.toString(),id:e})}):""),c.a.createElement(b.a.Row,null,g.length>15?A.slice(6,10).map(function(e){return I(e)}):""),c.a.createElement(b.a.Row,null,g.length>19?A.slice(10,14).map(function(e){return I(e)}):""),c.a.createElement(b.a.Row,null,g.length>19?A.slice(14,21).map(function(e){return function(e){var t=i[e],a=g[e];return a?c.a.createElement(b.a.Column,{key:e.toString(),mobile:16,tablet:8,computer:4,id:e},c.a.createElement(j.b,{to:"/track/".concat(k[e])},c.a.createElement(v.a,{rounded:!0,src:a,verticalAlign:"middle"}),c.a.createElement(O.a,{size:"large"},t)),c.a.createElement("br",null)):"null"}(e)}):""))},x=a(607),C=a(633),A=(a(310),a(309),{apiKey:"AIzaSyCpM-5_mw366JiwTsC6yaNeuK3leQbQrlI",authDomain:"nearify-f2a4a.firebaseapp.com",databaseURL:"https://nearify-f2a4a.firebaseio.com",projectId:"nearify-f2a4a",storageBucket:"nearify-f2a4a.appspot.com",messagingSenderId:"442855937718",appId:"1:442855937718:web:f1f6b7b42ca928efec3817",measurementId:"G-HV3MDELM9K"});m.a.initializeApp(A);var T=m.a.storage(),R=m.a.messaging(),N=T,M=R,I=m.a.database().ref().child("artists"),z=m.a.database().ref().child("users"),W=m.a.database().ref().child("songs"),L=m.a.database().ref().child("posts"),B=m.a.database().ref().child("messages"),H=m.a.database().ref().child("replies"),D=m.a.database().ref().child("likes"),q=m.a.database().ref().child("chats"),U=function(e){var t,a,n,c=new Date(e);return t=["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sep","Oct","Nov","Dec"][c.getMonth()]+" "+c.getDate().toString()+" ",c.getHours()>=12?(a=c.getHours().toString()-12,n="PM"):(a=c.getHours().toString(),n="AM"),t=t+a+":"+(c.getMinutes()<10?0+c.getMinutes().toString():c.getMinutes().toString())+n},P=a(131),J=a(604),_=a(625),Q=a(572),K=a(102),F=(a(60),new p.a,c.a.memo(function(e){var t=e.reply,a=c.a.useContext(Et);a.replies,a.setReplies,a.artists,a.setArtists,a.messages,a.setMessages,a.songs,a.setSongs,a.posts,a.setPosts,a.likes,a.setLikes,a.user,a.setUser,a.accesstoken,a.setAccesToken,a.refreshtoken,a.setRefreshtoken;if(t){var s=Object(n.useState)(""),r=Object(o.a)(s,2),l=r[0],u=r[1],m=t.posterid;return i.a.get("".concat("https://pure-harbor-26317.herokuapp.com/users/").concat(m)).then(function(e){u(e.data[0])}).catch(function(e){console.log(e)}),c.a.createElement("div",null,c.a.createElement(C.a,{attached:!0,secondary:!0,compact:!0},c.a.createElement(b.a,{columns:2},c.a.createElement(b.a.Column,{width:4},l?c.a.createElement("div",null,c.a.createElement(v.a,{style:{marginLeft:"10px",textAlign:"center"},circular:!0,src:l.image,size:"tiny"}),c.a.createElement(O.a,{style:{textAlign:"center",marginTop:"5px",marginLeft:"18px"},as:"h6"},"".concat(l.name))):c.a.createElement(J.a,{active:!0,inline:"centered"})),c.a.createElement(b.a.Column,{width:12},c.a.createElement(O.a,{as:"h4",style:{marginTop:"5px",marginLeft:"25px"}},t.content)))))}return console.log("Loading"),c.a.createElement("div",null,"loading")})),G=a(605),Y=function(e){var t=e.item,a=e.id,s=c.a.useContext(Et),r=(s.replies,s.setReplies,s.artists,s.setArtists,s.messages,s.setMessages,s.songs,s.setSongs,s.posts,s.setPosts,s.likes,s.setLikes,s.user),l=s.setUser,u=(s.accesstoken,s.setAccesToken,s.refreshtoken,s.setRefreshtoken,Object(n.useState)("")),m=Object(o.a)(u,2),d=m[0],g=m[1],p=Object(n.useRef)();function f(e){console.log(e),"Enter"===e.key&&(function(){console.log(document.getElementById("textareareply").value);var e=D.push(0).getKey();if(console.log("Likes key is ",e),H.child(t.replies).push({content:d,posterid:r.id,likes:e,createdAt:{".sv":"timestamp"}}),!r.postsfollowing.includes(a)){i.a.post("".concat("https://pure-harbor-26317.herokuapp.com/users/addpost/").concat(r.id,"/").concat(a)).then(function(e){console.log("updated!",e)}).catch(function(e){console.log(e)});var n=r;console.log(n),n.postsfollowing.push(a),console.log(n),l(n)}g("")}(),console.log("Works")),console.log("Works outside")}return c.a.createElement("div",null,c.a.createElement(G.a,{onKeyUp:function(e){return f(e)},ref:p,id:"textareareply",value:d,onChange:function(e){g(e.target.value),console.log(e.target.value)},rows:1,placeholder:"Reply to post"}))};c.a.memo(function(e){var t=e.item,a=e.id,s=c.a.useContext(Et),r=s.replies,l=(s.setReplies,s.artists,s.setArtists,s.messages,s.setMessages,s.songs,s.setSongs,s.posts,s.setPosts,s.likes),u=(s.setLikes,s.user),m=s.setUser,d=(s.accesstoken,s.setAccesToken,s.refreshtoken,s.setRefreshtoken,Object(n.useState)("")),g=Object(o.a)(d,2),p=g[0],f=g[1],h=Object(n.useState)(!1),E=Object(o.a)(h,2),j=E[0],k=E[1];Object(n.useRef)();if(t){var y=U(t.createdAt),S=t.posterid;return i.a.get("".concat("https://pure-harbor-26317.herokuapp.com/users/").concat(S)).then(function(e){f(e.data[0])}).catch(function(e){console.log(e)}),c.a.createElement("div",null,c.a.createElement(C.a,{attached:!0},p?c.a.createElement(b.a,{centered:!0},c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,{width:5},c.a.createElement(v.a,{circular:!0,src:p.image,size:"medium"}),c.a.createElement(b.a.Row,null,c.a.createElement(O.a,{as:"h4",textAlign:"center",style:{marginTop:"10px"}},"".concat(p.name)))),c.a.createElement(b.a.Column,{width:11},c.a.createElement(P.a,{as:"a",basic:!0,color:"red",size:"huge",pointing:"left",style:{marginTop:"12px"}},t.content))),c.a.createElement(b.a.Row,{style:{marginTop:"-20px",marginBottom:"-10px"}},c.a.createElement(b.a.Column,{width:8},c.a.createElement(O.a,{as:"h5",color:"gray"},0!=l[t.likes]?Object.values(l[t.likes]).length:0," Likes & ",0!=r[t.replies]?Object.values(r[t.replies]).length:0," Replies")),c.a.createElement(b.a.Column,{width:3}),c.a.createElement(b.a.Column,{width:5},c.a.createElement(O.a,{as:"h5",color:"gray"},"".concat(y))))):c.a.createElement(J.a,{active:!0,inline:"centered"})),0!=r[t.replies]&&j?Object.values(r[t.replies]).map(function(e){return c.a.createElement(F,{key:e.posterid+e.createdAt,reply:e})}):"",c.a.createElement(C.a,{attached:"bottom"},c.a.createElement(_.a,null,c.a.createElement(Y,{item:t,id:a}),c.a.createElement(Q.a,{fluid:!0,onClick:function(){!function(){if(console.log("Called outside if/else."),console.log(Object.values(l[t.likes])),0!=l[t.likes]&&Object.values(l[t.likes]).includes(u.id)){console.log("Called inside if"),console.log(Object.values(l[t.likes]));for(var e=0;e<Object.values(l[t.likes]).length;e++)if(Object.values(l[t.likes])[e]==u.id){var n=Object.keys(l[t.likes])[e];1==Object.values(l[t.likes]).length?D.child(t.likes).set(0):D.child(t.likes).remove(n).then(console.log("Done")).catch(function(e){return console.log(e)})}}else{console.log("Called."),D.child(t.likes).push(u.id).then(console.log("Done")).catch(function(e){return console.log(e)}),i.a.post("".concat("https://pure-harbor-26317.herokuapp.com/users/addpost/").concat(u.id,"/").concat(a)).then(function(e){console.log("updated!",e)}).catch(function(e){console.log(e)});var c=u;console.log(c),c.postsfollowing.push(a),console.log(c),m(c)}}()}},c.a.createElement(K.a,{color:"",name:"heart"}),Object.values(l[t.likes]).includes(u.id)?"Unlike":"Like"))),0==r[t.replies]||j?0!=r[t.replies]?c.a.createElement(_.a.Button,{fluid:!0,positive:!0,onClick:function(){return k(!1)},style:{marginTop:"10px"}},"Hide Replies"):"":c.a.createElement(_.a.Button,{fluid:!0,positive:!0,onClick:function(){return k(!0)},style:{marginTop:"10px"}},"Show Replies"))}return c.a.createElement(J.a,{active:!0,inline:"centered"})});var V=c.a.memo(function(e){var t=e.item,a=e.id,s=e.includeHeader,r=c.a.useContext(Et),l=r.replies,u=(r.setReplies,r.artists),m=(r.setArtists,r.messages,r.setMessages,r.songs),d=(r.setSongs,r.posts,r.setPosts,r.likes),g=(r.setLikes,r.user),p=r.setUser,f=(r.accesstoken,r.setAccesToken,r.refreshtoken,r.setRefreshToken,Object(n.useState)("")),h=Object(o.a)(f,2),E=h[0],j=h[1],k=Object(n.useState)(!1),y=Object(o.a)(k,2),S=y[0],w=y[1],x=Object(n.useState)("track"),A=Object(o.a)(x,2),T=A[0],R=A[1],N=Object(n.useState)(""),M=Object(o.a)(N,2),I=M[0],z=M[1],W=Object(n.useState)(""),L=Object(o.a)(W,2),B=L[0],H=L[1],q=Math.floor(12*Math.random());Object(n.useRef)();if(Object(n.useEffect)(function(){t&&t.artistid&&u?(R("artist"),z(u[t.artistid].name)):t&&t.trackid&&m&&(R("track"),H(m[t.trackid].name),console.log("here!"))},[t]),!t)return c.a.createElement("div",null,c.a.createElement(J.a,{active:!0,inline:"centered"}));var P=U(t.createdAt),G=t.posterid;return i.a.get("".concat("https://pure-harbor-26317.herokuapp.com/users/").concat(G)).then(function(e){j(e.data[0])}).catch(function(e){console.log(e)}),I||B?c.a.createElement("div",null,c.a.createElement(C.a,{attached:!0},E?c.a.createElement(b.a,{centered:!0},c.a.createElement(b.a.Row,null,c.a.createElement("div",null,c.a.createElement(v.a,{circular:!0,src:E.image,size:"small",avatar:!0}),s?c.a.createElement(O.a,{as:"h3"},"".concat(E.name)," ","posted to  ","artist"==T?I:B,"'s wall"):c.a.createElement(O.a,{as:"h3"},"".concat(E.name)))),c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,{width:16,style:{alignContent:"center"}},c.a.createElement(C.a,{centered:!0,color:["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black"][q]},c.a.createElement(O.a,{as:"h1"},t.content)))),c.a.createElement(b.a.Row,{style:{marginTop:"-20px",marginBottom:"-10px"}},c.a.createElement(b.a.Column,{width:8},c.a.createElement(O.a,{as:"h3",color:"gray"},0!=d[t.likes]?Object.values(d[t.likes]).length:0," Likes & ",0!=l[t.replies]?Object.values(l[t.replies]).length:0," Replies")),c.a.createElement(b.a.Column,{width:3}),c.a.createElement(b.a.Column,{width:5},c.a.createElement(O.a,{as:"h3",color:"gray"},"".concat(P))))):c.a.createElement("div",null,c.a.createElement(J.a,{active:!0,inline:"centered"}))),0!=l[t.replies]&&S?Object.values(l[t.replies]).map(function(e){return c.a.createElement(F,{key:e.posterid+e.createdAt,reply:e})}):"",c.a.createElement(C.a,{attached:"bottom"},c.a.createElement(_.a,null,c.a.createElement(Y,{item:t,id:a}),c.a.createElement(Q.a,{fluid:!0,onClick:function(){!function(){if(console.log("Called outside if/else."),console.log(Object.values(d[t.likes])),0!=d[t.likes]&&Object.values(d[t.likes]).includes(g.id)){console.log("Called inside if"),console.log(Object.values(d[t.likes]));for(var e=0;e<Object.values(d[t.likes]).length;e++)if(Object.values(d[t.likes])[e]==g.id){var n=Object.keys(d[t.likes])[e];1==Object.values(d[t.likes]).length?D.child(t.likes).set(0):D.child(t.likes).remove(n).then(console.log("Done")).catch(function(e){return console.log(e)})}}else{console.log("Called."),D.child(t.likes).push(g.id).then(console.log("Done")).catch(function(e){return console.log(e)}),i.a.post("".concat("https://pure-harbor-26317.herokuapp.com/users/addpost/").concat(g.id,"/").concat(a)).then(function(e){console.log("updated!",e)}).catch(function(e){console.log(e)});var c=g;console.log(c),c.postsfollowing.push(a),console.log(c),p(c)}}()}},c.a.createElement(K.a,{color:"",name:"heart"}),Object.values(d[t.likes]).includes(g.id)?"Unlike":"Like"))),0==l[t.replies]||S?0!=l[t.replies]?c.a.createElement(_.a.Button,{fluid:!0,positive:!0,onClick:function(){return w(!1)},style:{marginTop:"10px"}},"Hide Replies"):"":c.a.createElement(_.a.Button,{fluid:!0,positive:!0,onClick:function(){return w(!0)},style:{marginTop:"10px"}},"Show Replies")):void 0}),$=(a(60),new p.a,function(){var e=c.a.useContext(Et),t=(e.replies,e.setReplies,e.artists),a=(e.setArtists,e.messages,e.setMessages,e.songs),s=(e.setSongs,e.posts),r=(e.setPosts,e.likes,e.setLikes,e.user),l=e.setUser,i=(e.accesstoken,e.setAccesToken,e.refreshtoken,e.setRefreshtoken,Object(n.useState)([])),u=Object(o.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)(!1),p=Object(o.a)(g,2),f=p[0],h=p[1],b=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black"],E=Math.floor(12*Math.random());return Object(n.useEffect)(function(){for(var e=[],n=0;n<r.favoriteartists.length;n++)if(t&&t[r.favoriteartists[n]]&&console.log(t[r.favoriteartists[n]].name),console.log(t),t&&t[r.favoriteartists[n]]&&"None"!=t[r.favoriteartists[n]].posts){var c=Object.values(t[r.favoriteartists[n]].posts);c.length>=3?c.slice(-3).map(function(t){return e.push(t)}):c.length>1?(console.log("Here2"),c.slice(-2).map(function(t){return e.push(t)})):1==c.length&&c.slice(-1).map(function(t){return e.push(t)})}for(var o=0;o<r.favoritesongs.length;o++)if(a&&a[r.favoritesongs[o]]&&"None"!=a[r.favoritesongs[o]].posts){var c=Object.values(a[r.favoritesongs[o]].posts);c.length>=3?c.slice(-3).map(function(t){return e.push(t)}):c.length>1?c.slice(-2).map(function(t){return e.push(t)}):1==c.length&&c.slice(-1).map(function(t){return e.push(t)})}s&&(e.sort(function(e,t){return s[t].createdAt-s[e].createdAt}),d(e),h(!0)),d(e)},[t,a,s]),r?localStorage.setItem("user",JSON.stringify(r)):l(JSON.parse(localStorage.getItem("user"))),r&&t&&a&&m.length>0?c.a.createElement("div",{className:"HomepageFeed"},c.a.createElement(x.a,null,c.a.createElement(O.a,{as:"h1",content:"What's been up with your favorite music?",textAlign:"center",dividing:!0}),m&&s&&f?m.map(function(e){return c.a.createElement(C.a,{color:b[E],raised:!0,style:{marginTop:"40px"}},c.a.createElement(V,{item:s[e],id:e,includeHeader:!0}))}):" ",c.a.createElement(O.a,{as:"h1"}," To start using the website, go to an artist's or song's page and then leave a post, reply or like! We hope this can be a place to talk about music!! If you like the idea, share this so we can build a community. "))):"Loading"}),X=a(222),Z=a.n(X),ee=a(321),te=a(629),ae=function(e){var t=e.access_token,a=e.id,s=c.a.useContext(Et),r=(s.replies,s.setReplies,s.artists,s.visible,s.setVisible),l=(s.setArtists,s.messages,s.setMessages,s.songs,s.setSongs,s.posts,s.setPosts,s.likes,s.setLikes,s.user),u=s.setUser,m=s.accesstoken,g=(s.setAccesToken,s.refreshtoken),p=(s.setRefreshToken,Object(n.useState)("")),f=Object(o.a)(p,2),E=f[0],v=f[1],k=Object(n.useState)([]),y=Object(o.a)(k,2),S=y[0],w=y[1],x=Object(n.useState)(!1),A=Object(o.a)(x,2),T=A[0],R=A[1],N=Object(n.useState)(""),M=Object(o.a)(N,2),I=M[0],z=M[1],W=Object(n.useState)(!1),L=Object(o.a)(W,2),B=L[0],H=L[1],D=Object(n.useState)(!1),q=Object(o.a)(D,2),U=q[0],P=q[1],J=Object(n.useState)(!1),_=Object(o.a)(J,2),K=_[0],F=_[1],G=Object(n.useState)(!1),Y=Object(o.a)(G,2),V=Y[0],$=Y[1],X=Object(n.useState)(!1),ae=Object(o.a)(X,2),ne=(ae[0],ae[1],Object(n.useState)(!1)),ce=Object(o.a)(ne,2),se=ce[0],re=ce[1];function oe(){return(oe=Object(ee.a)(Z.a.mark(function e(t){var a,n,c,s,r,o,l,u,d,g,p;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),v(t),console.log(t),a="https://api.spotify.com/v1/search"+"?q=".concat(encodeURIComponent(t))+"&type=artist",e.next=6,i.a.get(a,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+m}});case 6:for(n=e.sent,c=[],console.log(n),(s=n.data.artists.items.length)<(r=10)&&(r=s),o=0;o<r;o++)(l=n.data.artists.items[o]).images[0]?c.push({title:l.name,image:l.images[0].url,description:l.genres[0],price:l.popularity,id:l.id,type:"artist"}):c.push({title:l.name,image:"https://images.unsplash.com/photo-1554050857-c84a8abdb5e2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=564&q=80",description:l.genres[0],price:l.popularity,id:l.id,type:"artist"});return u="https://api.spotify.com/v1/search"+"?q=".concat(encodeURIComponent(t))+"&type=track",e.next=16,i.a.get(u,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+m}});case 16:for(d=e.sent,(s=d.data.tracks.items.length)<(r=10)&&(r=s),g=0;g<r;g++)p=d.data.tracks.items[g],console.log(p),p.album.images[0]?c.push({title:p.name,image:p.album.images[0].url,description:p.album.name,price:p.popularity,id:p.id,type:"track"}):c.push({title:p.name,image:"https://images.unsplash.com/photo-1554050857-c84a8abdb5e2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=564&q=80",description:p.album.name,price:p.popularity,id:p.id,type:"track"});c.sort(function(e,t){return e.price>t.price?-1:1}),w(c),R(!1);case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}return c.a.createElement("div",null,c.a.createElement(C.a,{basic:!0,style:{backgroundColor:"#1DB954",textAlign:"center",marginBottom:"10px"},fluid:"true"},c.a.createElement(b.a,{centered:!0},c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,{width:"5"},c.a.createElement(O.a,{as:j.b,to:"/home/".concat(t,"/").concat(a),inverted:!0,content:"Nearify: Everything About Music.",size:"huge",color:"black",style:{cursor:"default"}})),c.a.createElement(b.a.Column,{width:5},c.a.createElement(te.a,{loading:T,onResultSelect:function(e,t){var a=t.result;z(a),console.log(a),"artist"==a.type?H(!0):P(!0)},onSearchChange:h.a.debounce(function(e,t){return function(e){return oe.apply(this,arguments)}(t.value)},500,{leading:!0}),results:S,value:E,fluid:!0,input:{fluid:!0}})),c.a.createElement(b.a.Column,{width:1},c.a.createElement(Q.a.Group,null,c.a.createElement(Q.a,{onClick:function(){return re(!0)},inverted:!0,icon:"home",color:"black"}),c.a.createElement(Q.a,{onClick:function(){return $(!0)},inverted:!0,icon:"settings",color:"black"}),c.a.createElement(Q.a,{inverted:!0,onClick:function(){F(!0),u("")},icon:"arrow left",color:"black"},"Logout"),c.a.createElement(Q.a,{inverted:!0,onClick:function(){r(!0)},icon:"arrow left",color:"black"},"Menu")))))),B?c.a.createElement(d.a,{to:"/artist/".concat(I.id),push:!0}):"",U?c.a.createElement(d.a,{to:"/track/".concat(I.id),push:!0}):"",K?c.a.createElement(d.a,{to:"/",push:!0}):"",V?c.a.createElement(d.a,{to:"/settings",push:!0}):"",se?c.a.createElement(d.a,{to:"/home/".concat(l.id,"/").concat(m,"/").concat(g),push:!0}):"")},ne=(a(60),new p.a),ce=function(){var e=Object(d.f)(),t=e.id,a=e.access_token,s=e.refresh_token,r=c.a.useContext(Et),l=(r.replies,r.setReplies,r.artists,r.setArtists,r.messages,r.setMessages,r.songs,r.setSongs,r.posts,r.setPosts,r.likes,r.setLikes,r.user),u=r.setUser,m=(r.accesstoken,r.setAccesToken),g=(r.refreshtoken,r.setRefreshToken);m(a),g(s),ne.setAccessToken(a);var p=Object(n.useState)({name:"not checked",image:""}),f=Object(o.a)(p,2),h=(f[0],f[1],Object(n.useState)("")),E=Object(o.a)(h,2),v=(E[0],E[1],Object(n.useState)([])),O=Object(o.a)(v,2),j=(O[0],O[1],Object(n.useState)(!1)),k=Object(o.a)(j,2),S=(k[0],k[1],Object(n.useState)("")),x=Object(o.a)(S,2),C=x[0],A=(x[1],Object(n.useState)(!1)),T=Object(o.a)(A,2),R=T[0],N=(T[1],Object(n.useState)(!1)),M=Object(o.a)(N,2),I=M[0],z=(M[1],Object(n.useState)(!1)),W=Object(o.a)(z,2),L=(W[0],W[1]),B=Object(n.useState)(!1),H=Object(o.a)(B,2),D=(H[0],H[1],Object(n.useState)(!1)),q=Object(o.a)(D,2);q[0],q[1];setTimeout(function(){L(!0)},3e3);var U="https://pure-harbor-26317.herokuapp.com/users/";return Object(n.useEffect)(function(){i.a.get("".concat(U).concat(t)).then(function(e){u(e.data[0])}).catch(function(e){console.log(e)})},[]),c.a.createElement("div",{className:"App"},c.a.createElement(b.a,{padded:!0},c.a.createElement(b.a.Row,{stretched:!0},c.a.createElement(b.a.Column,{width:3},l.favoritesongs?c.a.createElement(w,{songs:l.favoritesongs,accesstoken:a,refreshtoken:s}):""),c.a.createElement(b.a.Column,{width:10},l?c.a.createElement($,null):""),c.a.createElement(b.a.Column,{width:3},l.favoriteartists?c.a.createElement(y,{artists:l.favoriteartists,accesstoken:a,refreshtoken:s}):""))),R?c.a.createElement(d.a,{to:"/artist/".concat(C.id),push:!0}):"",I?c.a.createElement(d.a,{to:"/track/".concat(C.id),push:!0}):"")},se=a(637),re=a(614),oe=a(612),le=a(613),ie=a(610),ue=a(173),me=a.n(ue),de=a(608),ge=a(168),pe=a.n(ge);pe.a[900],Object(de.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://i.ibb.co/pQBpgMz/streaks-black-stripes-green-lines-3840x2160-c2-000000-32cd32-l2-113-113-a-135-f-1.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});var fe=a(634),he=a(630),be=function(){var e=c.a.useContext(Et),t=e.visible,a=e.setVisible,n=e.user,s=e.accesstoken;return c.a.createElement(fe.a,{as:he.a,animation:"overlay",icon:"labeled",inverted:!0,onHide:function(){return a(!1)},vertical:!0,visible:t,width:"thin"},c.a.createElement(he.a.Item,{as:j.b,to:"/".concat(n.id,"/").concat(s),onClick:function(){return setTimeout(function(){return a(!1)},500)}},c.a.createElement(K.a,{name:"home"}),"Home"),c.a.createElement(he.a.Item,{as:j.b,to:"/tracks",onClick:function(){return setTimeout(function(){return a(!1)},500)}},c.a.createElement(K.a,{name:"chat"}),"Songs"),c.a.createElement(he.a.Item,{as:j.b,to:"/artists",onClick:function(){return setTimeout(function(){return a(!1)},500)}},c.a.createElement(K.a,{name:"street view"}),"Artits"),c.a.createElement(he.a.Item,{onClick:function(){return setTimeout(function(){return a(!1)},500)}},c.a.createElement(K.a,{name:"bolt"}),"Goals"))},Ee=a(635),ve=a(638),Oe=a(617),je=a(639),ke=a(41),ye=new(a.n(ke).a.icon)({iconUrl:"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon.png",iconSize:[25,41],iconAnchor:[13,0]}),Se=function(){var e=[51.505,-.09];return c.a.createElement("div",{id:"map"},c.a.createElement(Ee.a,{style:{height:"100vh"},center:e,zoom:13},c.a.createElement(ve.a,{detectRetina:!0,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),c.a.createElement(Oe.a,{position:e,icon:ye},c.a.createElement(je.a,null,"A pretty CSS3 popup.",c.a.createElement("br",null),"Easily customizable."))))},we=a(640),xe=a(621),Ce=a(626),Ae=a(327),Te=a.n(Ae),Re=a(568),Ne=a(622),Me=(a(525),a(641)),Ie=a(642),ze=a(618),We=a(624),Le=Object(de.a)(function(e){return{button:{display:"block",marginTop:"10px"},formControl:{margin:e.spacing(0),minWidth:120}}}),Be=function(e){var t=e.availableQuestions,a=e.chosen,n=e.setter,s=Le(),r=c.a.useState(""),l=Object(o.a)(r,2),i=(l[0],l[1],c.a.useState(!1)),u=Object(o.a)(i,2),m=u[0],d=u[1];console.log("here"),console.log(t);return c.a.createElement("div",null,c.a.createElement(ze.a,{className:s.formControl},c.a.createElement(Me.a,{id:"demo-controlled-open-select-label"},"Question"),c.a.createElement(We.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",open:m,onClose:function(){d(!1)},onOpen:function(){d(!0)},value:a,onChange:function(e){n(e.target.value)}},c.a.createElement(Ie.a,{value:""},c.a.createElement("em",null,"None")),t.map(function(e){return c.a.createElement(Ie.a,{value:e},e)}))))},He=Object(de.a)(function(e){return{root:{"& > *":{margin:e.spacing(1)}},input:{display:"none"}}}),De=function(e){var t=e.setter,a=He();return c.a.createElement("div",{className:a.root},c.a.createElement("input",{accept:"image/*",className:a.input,id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){console.log(e.target.files[0]),t(e.target.files[0])}}),c.a.createElement("label",{htmlFor:"contained-button-file"},c.a.createElement(re.a,{variant:"contained",color:"primary",component:"span"},"Upload")))},qe=a(526),Ue=Object(de.a)(function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}),Pe=function(){var e=Ue(),t=Object(d.f)(),a=t.id,s=t.access_token,r=t.refresh_token,l=Object(n.useState)(!1),u=Object(o.a)(l,2),m=(u[0],u[1]),g=Object(n.useState)(""),p=Object(o.a)(g,2),f=(p[0],p[1],Object(n.useState)("")),h=Object(o.a)(f,2),b=h[0],E=(h[1],Object(n.useState)("")),v=Object(o.a)(E,2),O=(v[0],v[1],Object(n.useState)(!1)),j=Object(o.a)(O,2),k=j[0],y=j[1],S=Object(n.useState)(""),w=Object(o.a)(S,2),x=w[0],C=w[1],A=Object(n.useState)(""),T=Object(o.a)(A,2),R=T[0],M=(T[1],Object(n.useState)("")),I=Object(o.a)(M,2),z=I[0],W=(I[1],Object(n.useState)("")),L=Object(o.a)(W,2),B=L[0],H=L[1],D=Object(n.useState)(""),q=Object(o.a)(D,2),U=(q[0],q[1],Object(n.useState)("")),P=Object(o.a)(U,2),J=(P[0],P[1],Object(n.useState)("")),_=Object(o.a)(J,2),Q=_[0],K=(_[1],Object(n.useState)(null)),F=Object(o.a)(K,2),G=F[0],Y=F[1],V=Object(n.useState)(""),$=Object(o.a)(V,2),X=$[0],Z=$[1],ee=Object(n.useState)(""),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(""),le=Object(o.a)(ce,2),ue=le[0],me=le[1],de=Object(n.useState)(""),ge=Object(o.a)(de,2),pe=ge[0],fe=ge[1],he=["What's the last song that was stuck in your head?","Who's music taste has been most influential in your life?","Who's the first person you send new music to?","What do you miss most about being at a concert?","What does music mean to you?","What's a genre of music you haven't explored enough but want to revisit?","An artist you\u2019d like to meet?","Your favorite throwback jams?"],be=Object(n.useState)(he),Ee=Object(o.a)(be,2),ve=Ee[0];Ee[1];console.log(ve);var Oe=Object(n.useState)(""),je=Object(o.a)(Oe,2),ke=je[0],ye=je[1],Se=Object(n.useState)(""),Ae=Object(o.a)(Se,2),Me=Ae[0],Ie=Ae[1],ze=Object(n.useState)(""),We=Object(o.a)(ze,2),Le=We[0],He=We[1],Pe=Object(n.useState)(""),Je=Object(o.a)(Pe,2),_e=Je[0],Qe=Je[1],Ke=Object(n.useState)(""),Fe=Object(o.a)(Ke,2),Ge=Fe[0],Ye=Fe[1],Ve=Object(n.useState)(""),$e=Object(o.a)(Ve,2),Xe=$e[0],Ze=$e[1];var et=Object(n.createRef)();return Object(n.useEffect)(function(){if(function(){if(B){var e="https://pure-harbor-26317.herokuapp.com/dating/home/".concat(a,"/").concat(s,"/").concat(r);console.log(typeof B),Z(e),y(!0)}else m(!0)}(),k&&null!==G){var e="https://pure-harbor-26317.herokuapp.com/users/signup/".concat(a,"?");N.ref("users/".concat(a,"/cute")).put(B).on("state_changed",function(e){Math.round(e.bytesTransferred/e.totalBytes*100)},function(e){console.log(e)},function(){N.ref("users").child(a).child("cute").getDownloadURL().then(function(e){C(e)})}),console.log(he.indexOf(_e));var t=he.indexOf(_e).toString(),n=he.indexOf(Ge).toString(),c=he.indexOf(Xe).toString();console.log(t),i.a.post(e+qe.stringify({gender:b,phone:Q,location:G,fname:ae,lname:ue,bio:pe,q1:t,q2:n,q3:c,ans1:ke,ans2:Me,ans3:Le})).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}console.log(k),console.log(G),console.log(null!==G)},[k,G]),Object(n.useEffect)(function(){var e="https://pure-harbor-26317.herokuapp.com/users/signup/".concat(a,"/2?");x&&(i.a.post(e+qe.stringify({datingimages:[x]})).then(function(e){console.log(e)}).catch(function(e){console.log(e)}),window.location.assign(X))},[x,R,z]),Object(n.useEffect)(function(){},[_e,Ge,Xe]),Object(n.useEffect)(function(){return console.log(x)},[x]),c.a.createElement("div",{ref:et},c.a.createElement(Ne.a,{component:"main",maxWidth:"xs"},c.a.createElement(oe.a,null),c.a.createElement("div",{className:e.paper},c.a.createElement(se.a,{className:e.avatar},c.a.createElement(Te.a,null)),c.a.createElement(Re.a,{component:"h1",variant:"h5"},"Sign up"),c.a.createElement("form",{className:e.form,noValidate:!0},c.a.createElement(ie.a,{container:!0,spacing:2},c.a.createElement(ie.a,{item:!0,xs:12,sm:6},c.a.createElement(we.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:ae,onChange:function(e){ne(e.target.value)}})),c.a.createElement(ie.a,{item:!0,xs:12,sm:6},c.a.createElement(we.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:function(e){me(e.target.value)}})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(we.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Bio",name:"email",autoComplete:"email",onChange:function(e){fe(e.target.value)}})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Be,{availableQuestions:ve,chosen:_e,setter:Qe})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(we.a,{variant:"outlined",required:!0,fullWidth:!0,name:"ques1",label:"Question 1 Answer",id:"ques1",onChange:function(e,t){ye(e.target.value)}})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(Be,{availableQuestions:ve,chosen:Ge,setter:Ye})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(we.a,{variant:"outlined",required:!0,fullWidth:!0,name:"ques2",label:"Question 2 Answer",id:"ques2",onChange:function(e,t){Ie(e.target.value)}})),c.a.createElement(ie.a,{marginTop:"0px",item:!0,xs:12},c.a.createElement(Be,{availableQuestions:ve,chosen:Xe,setter:Ze})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(we.a,{variant:"outlined",required:!0,fullWidth:!0,name:"ques3",label:"Question 3 Answer",id:"ques3",onChange:function(e,t){He(e.target.value)}})),c.a.createElement(ie.a,{item:!0,xs:12},c.a.createElement(De,{setter:H}))),c.a.createElement(re.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){navigator.geolocation.getCurrentPosition(function(e){Y([e.coords.latitude,e.coords.longitude])})}},"Sign Up"))),c.a.createElement(Ce.a,{mt:5},c.a.createElement(function(){return c.a.createElement(Re.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",c.a.createElement(xe.a,{color:"inherit",href:"https://material-ui.com/"},"HeartBeat")," ",(new Date).getFullYear(),".")},null))))},Je=a(51),_e=(a(60),new p.a),Qe=function(){var e=Object(d.f)().artistid,t=Object(n.useState)(""),a=Object(o.a)(t,2),s=a[0],r=a[1],l=c.a.useContext(Et),u=(l.replies,l.setReplies,l.artists),m=(l.setArtists,l.messages,l.setMessages,l.songs,l.setSongs,l.posts),g=(l.setPosts,l.likes,l.setLikes,l.user),p=l.setUser;l.accesstoken,l.setAccesToken,l.refreshtoken,l.setRefreshtoken;g&&localStorage.setItem("user",JSON.stringify(g));var f=Object(n.useState)(""),h=Object(o.a)(f,2),E=h[0],v=h[1],j=Object(n.useState)(""),k=Object(o.a)(j,2),y=k[0],S=k[1],w=Object(n.useState)(""),A=Object(o.a)(w,2),T=(A[0],A[1]),R=Object(n.useState)(""),N=Object(o.a)(R,2),M=(N[0],N[1]),z=Object(n.useState)(""),W=Object(o.a)(z,2);W[0],W[1];if(u&&!u[e]&&E){var B={id:e,name:E,posts:"None"},q=Object(Je.a)({},e,B);I.update(q)}return Object(n.useEffect)(function(){_e.getArtist(e).then(function(e){v(e.name),e.images[0].url?(console.log(e.images[0].url),S(e.images[0].url)):S("https://images.unsplash.com/photo-1554050857-c84a8abdb5e2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=564&q=80"),e.images[1].url&&(console.log(e.images[1].url),T(e.images[1].url)),e.images[2].url&&(console.log(e.images[2].url),M(e.images[2].url))}).catch(function(e){return console.log(e)})},[]),g||JSON.parse(localStorage.getItem("user"))?(console.log(g),console.log(JSON.parse(localStorage.getItem("user"))),c.a.createElement("div",{className:"HomepageArtist"},c.a.createElement(x.a,null,c.a.createElement("br",null),c.a.createElement(O.a,{as:"h1",content:E,textAlign:"center"}),c.a.createElement("br",null),c.a.createElement("img",{class:"ui medium centered image",src:y,centered:!0,size:"medium"}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",null,c.a.createElement(O.a,{style:{marginTop:"10px"},textAlign:"center",as:"h3"},"Say something about this artist"),c.a.createElement(_.a,{onSubmit:function(){return function(){console.log(document.getElementById("textarea").value);var t=D.push(0).getKey();console.log("Likes key is ",t);var a=H.push(0).getKey();console.log("Likes key is ",t),console.log("replies key is ",a);var n=L.push({content:s,posterid:g.id,artistid:e,likes:t,replies:a,createdAt:{".sv":"timestamp"},type:"artist"}).key;if(console.log("here"),I.child(e).child("posts").push(n),!g.postsfollowing.includes(n)){i.a.post("".concat("https://pure-harbor-26317.herokuapp.com/users/addpost/").concat(g.id,"/").concat(n)).then(function(e){console.log("updated!",e)}).catch(function(e){console.log(e)});var c=g;console.log(c),c.postsfollowing.push(n),console.log(c),p(c)}r("")}()}},c.a.createElement(G.a,{id:"textarea",value:s,onChange:function(e){return r(e.target.value)},rows:2,placeholder:"Add a post"}),c.a.createElement(_.a.Button,{fluid:!0,positive:!0,style:{marginTop:"10px"}},"Post"))),c.a.createElement("div",null,c.a.createElement(b.a,null,c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,{width:3}),c.a.createElement(b.a.Column,{width:10},u&&u[e]&&"None"!=u[e].posts?Object.values(u[e].posts).map(function(e){return c.a.createElement(C.a,{raised:!0,style:{marginTop:"40px"}},c.a.createElement(V,{key:e.toString(),item:m[e],id:e,includeHeader:!1}))}):" "),c.a.createElement(b.a.Column,{width:3}))))))):c.a.createElement(d.a,{to:"/",push:!0})},Ke=(a(60),new p.a),Fe=function(){var e=Object(d.f)().trackid,t=Object(n.useState)(""),a=Object(o.a)(t,2),s=(a[0],a[1],c.a.useContext(Et)),r=(s.replies,s.setReplies,s.artists,s.setArtists,s.messages,s.setMessages,s.songs),l=(s.setSongs,s.posts),u=(s.setPosts,s.likes,s.setLikes,s.user),m=s.setUser;s.accesstoken,s.setAccesToken,s.refreshtoken,s.setRefreshtoken;localStorage.setItem("user",JSON.stringify(u));var g=Object(n.useState)(""),p=Object(o.a)(g,2),f=p[0],h=p[1],E=Object(n.useState)(""),j=Object(o.a)(E,2),k=j[0],y=j[1],S=Object(n.useState)(""),w=Object(o.a)(S,2),A=w[0],T=w[1],R=Object(n.useState)(""),N=Object(o.a)(R,2),M=(N[0],N[1],Object(n.useState)("")),I=Object(o.a)(M,2),z=(I[0],I[1],Object(n.useState)("")),B=Object(o.a)(z,2),q=B[0],U=B[1];if(r&&!r[e]&&f&&k){var P={id:e,name:f,posts:"None",artist:k},J=Object(Je.a)({},e,P);W.update(J)}return Object(n.useEffect)(function(){Ke.getTrack(e).then(function(e){console.log(e),h(e.name),y(e.artists[0].name),e.album.images[0].url?(console.log("THE IMAGE",e.album.images[0].url),T(e.album.images[0].url)):T("https://images.unsplash.com/photo-1554050857-c84a8abdb5e2?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=564&q=80")}).catch(function(e){return console.log(e)})},[]),c.a.createElement("div",{className:"HomepageTrack"},c.a.createElement(x.a,null,c.a.createElement(O.a,{as:"h1",content:f,textAlign:"center",dividing:!0}),c.a.createElement(v.a,{src:A,centered:!0,size:"medium"}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",null,c.a.createElement(O.a,{style:{marginTop:"10px"},textAlign:"center",as:"h3"},"Say something about this song"),c.a.createElement(_.a,{onSubmit:function(){return function(){console.log(document.getElementById("textarea").value);var t=D.push(0).getKey();console.log("Likes key is ",t);var a=H.push(0).getKey();console.log("Likes key is ",t),console.log("replies key is ",a);var n=L.push({content:q,posterid:u.id,trackid:e,likes:t,replies:a,createdAt:{".sv":"timestamp"}}).key;console.log("here"),W.child(e).child("posts").push(n),i.a.post("".concat("https://pure-harbor-26317.herokuapp.com/users/addpost/").concat(u.id,"/").concat(n)).then(function(e){console.log("updated!",e)}).catch(function(e){console.log(e)});var c=u;console.log(c),c.postsfollowing.push(n),console.log(c),m(c),U("")}()}},c.a.createElement(G.a,{id:"textarea",value:q,onChange:function(e){return U(e.target.value)},rows:2,placeholder:"Add a post"}),c.a.createElement(_.a.Button,{fluid:!0,positive:!0,style:{marginTop:"10px"}},"Post"))),c.a.createElement("div",null,c.a.createElement(b.a,null,c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,{width:3}),c.a.createElement(b.a.Column,{width:10},r&&r[e]&&"None"!=r[e].posts?Object.values(r[e].posts).map(function(e){return c.a.createElement(C.a,{raised:!0,style:{marginTop:"40px"}},c.a.createElement(V,{key:e.toString(),item:l[e],id:e,includeHeader:!1}))}):" "),c.a.createElement(b.a.Column,{width:3}))))))},Ge=function(){var e=c.a.useContext(Et),t=(e.replies,e.setReplies,e.artists,e.setArtists,e.messages,e.setMessages,e.songs,e.setSongs,e.posts,e.setPosts,e.likes,e.setLikes,e.user);e.setUser,e.accesstoken,e.setAccesToken,e.refreshtoken,e.setRefreshToken;return c.a.createElement("div",null,c.a.createElement(x.a,null,c.a.createElement(b.a,{centered:!0},c.a.createElement(b.a.Row,null,c.a.createElement(O.a,{as:"h2"}," Helloooo, ",t.name,". What's up?")),c.a.createElement(b.a.Row,null,c.a.createElement(O.a,{as:"h3"},"So here's the information we have about you: No stalking we promise, haha.")),c.a.createElement(b.a.Row,null,c.a.createElement(O.a,{as:"h4"},"Email: ",t.email),c.a.createElement(b.a.Row,null,c.a.createElement(O.a,{as:"h4"},"(FYI we also know your top artists/songs but that's just so that we can give you content that's relevant for you lol.) ",t.email))),c.a.createElement(b.a.Row,null,"https://pngimg.com/uploads/music_notes/music_notes_PNG84.png"===t.image?c.a.createElement(O.a,null,"We don't have a picture for your account, but soon we'll allow you to upload one!"):c.a.createElement("div",null,c.a.createElement(O.a,null,"Here's a beautiful picture of you too :O "),c.a.createElement(v.a,{circular:!0,src:t.image,size:"large"}))))))},Ye=a(623),Ve=new p.a,$e=function(e){var t=e.person,a=e.type,s=c.a.useContext(Et),r=s.accesstoken,l=s.user,i=Object(n.useState)([]),u=Object(o.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)([]),p=Object(o.a)(g,2),f=p[0],h=p[1],b=[],E=[],j=[];Ve.setAccessToken(r),Object(n.useEffect)(function(){for(var e=function(e){"favoriteartists"==a?Ve.getArtist(t[a][e]).then(function(t){b.push(t.name),E.push(t.images[0].url),j.push(l.favoriteartists[e]),d(b),h(E)}).catch(function(e){return console.log(e)}):Ve.getTrack(t[a][e]).then(function(e){b.push(e.name),E.push(e.album.images[0].url),b.length==t[a].length&&(d(b),h(E))}).catch(function(e){return console.log(e)})},n=0;n<t[a].length;n++)e(n)},[t]);var k=function(e){var t=e.id,a=m[t],n=f[t];return n?c.a.createElement("div",{style:{marginTop:"-25px"},key:t.toString(),id:t},c.a.createElement(v.a,{style:{marginTop:"5px"},size:"small",rounded:!0,verticalAlign:"middle",src:n}),c.a.createElement(O.a,{style:{marginTop:"5px"},size:"small"},a),c.a.createElement("br",null)):null};return c.a.createElement("div",null,c.a.createElement(O.a,null,t.name," doesn't have any in common, but they can talk to you about their favorites including:"),c.a.createElement("br",null),m.map(function(e,t){return c.a.createElement(k,{id:t})}))},Xe=(a(60),new p.a),Ze=function(e){var t=e.person,a=c.a.useContext(Et),s=a.accesstoken,r=a.user,l=Object(n.useState)([]),i=Object(o.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),g=Object(o.a)(d,2),p=g[0],f=g[1],h=Object(n.useState)([]),b=Object(o.a)(h,2),j=(b[0],b[1]),k=Object(E.a)(Array(20).keys()),y=Object(n.useState)(k),S=Object(o.a)(y,2),w=S[0];S[1];Xe.setAccessToken(s),Object(n.useEffect)(function(){if(r)for(var e=function(e){t&&t.favoriteartists.includes(r.favoriteartists[e])&&Xe.getArtist(r.favoriteartists[e]).then(function(t){x.push(t.name),C.push(t.images[0].url),A.push(r.favoriteartists[e]),m(x),f(C),j(A)}).catch(function(e){return console.log(e)})},a=0;a<r.favoriteartists.length;a++)e(a)},[r]);var x=[],C=[],A=[];var T=function(e){var t=e.id,a=u[t],n=p[t];return n?c.a.createElement("div",{style:{marginTop:"-25px"},key:t.toString(),id:t},c.a.createElement(v.a,{style:{marginTop:"5px"},size:"small",rounded:!0,src:n,verticalAlign:"middle"}),c.a.createElement(O.a,{style:{marginTop:"5px"},size:"small"},a),c.a.createElement("br",null)):null};return c.a.createElement("div",{className:"FavoriteArtists "},c.a.createElement(O.a,{size:"huge"},"Artist Matches"),c.a.createElement(Ye.a,{hidden:!0}),p.length>0?w.map(function(e){return c.a.createElement(T,{key:e.toString(),id:e})}):c.a.createElement($e,{person:t,type:"favoriteartists"}))},et=(a(60),new p.a),tt=function(e){var t=e.person,a=Object(n.useContext)(Et),s=a.accesstoken,r=a.user,l=Object(n.useState)([]),i=Object(o.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),g=Object(o.a)(d,2),p=g[0],f=g[1],h=Object(n.useState)([]),j=Object(o.a)(h,2),k=(j[0],j[1]),y=Object(E.a)(Array(20).keys()),S=Object(n.useState)(y),w=Object(o.a)(S,2),x=w[0];w[1];et.setAccessToken(s),Object(n.useEffect)(function(){if(console.log(r),r)for(var e=function(e){t.favoritesongs.includes(r.favoritesongs[e])&&et.getTrack(r.favoritesongs[e]).then(function(t){C.push(t.name),A.push(t.album.images[0].url),T.push(r.favoritesongs[e]),m(C),f(A),k(T)}).catch(function(e){return console.log(e)})},a=0;a<r.favoritesongs.length;a++)e(a)},[r]);var C=[],A=[],T=[];var R=function(e){var t=e.id,a=u[t],n=p[t];return n?c.a.createElement("div",{style:{marginTop:"-25px"},key:t.toString(),id:t},c.a.createElement(v.a,{style:{marginTop:"5px"},size:"small",rounded:!0,src:n,verticalAlign:"middle"}),c.a.createElement(O.a,{style:{marginTop:"5px"},size:"small"},a),c.a.createElement("br",null)):"null"};return c.a.createElement("div",{className:"OverlappingSongs "},c.a.createElement(O.a,{size:"huge"},"Song Matches"),c.a.createElement(b.a.Row,null,p.length>0?x.map(function(e){return c.a.createElement(R,{key:e.toString(),id:e})}):c.a.createElement($e,{type:"favoritesongs",person:t})))},at=(a(529),function(e){var t=e.increaseIndex,a=e.person,s=Object(n.useState)(0),r=Object(o.a)(s,2),l=r[0],i=(r[1],Object(n.useState)(!0)),u=Object(o.a)(i,2),m=(u[0],u[1],Object(n.useContext)(Et)),d=m.user,g=m.users;var p=["What's the last song that was stuck in your head?","Who's music taste has been most influential in your life?","Who's the first person you send new music to?","What do you miss most about being at a concert?","What does music mean to you?","What's a genre of music you haven't explored enough but want to revisit?","An artist you\u2019d like to meet?","Your favorite throwback jams?"];return c.a.createElement(C.a,{raised:!0},c.a.createElement(O.a,{size:"huge",textAlign:"center"},a.name),c.a.createElement(O.a,{size:"medium",style:{marginTop:"5px"},textAlign:"center"},"Want to know ",a.name," better? "),c.a.createElement(Q.a.Group,{style:{marginBottom:"5px"},fluid:!0},c.a.createElement(Q.a,{onClick:function(){t(),z.child(d.id).child("seen").push(a.id)}},"No"),c.a.createElement(Q.a.Or,null),c.a.createElement(Q.a,{positive:!0,onClick:function(){if(z.child(d.id).child("seen").push(a.id),Object.values(g[a.id].interested).includes(d.id)){z.child(d.id).child("matched").push(a.id);var e=q.push({person1:d.id,person2:a.id}).getKey();z.child(d.id).child("chats").push(e),z.child(a.id).child("chats").push(e)}else z.child(d.id).child("interested").push(a.id);t(),console.log("IN SIDE")}},"Yes")),c.a.createElement(b.a,{fluid:!0,colums:3},c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,{width:2}),c.a.createElement(b.a.Column,{width:4},c.a.createElement(v.a,{rounded:!0,centered:!0,src:a.datingimages[l],fluid:!0})),c.a.createElement(b.a.Column,{width:4},c.a.createElement(v.a,{rounded:!0,centered:!0,src:a.datingimages[l],fluid:!0})),c.a.createElement(b.a.Column,{width:4},c.a.createElement(v.a,{rounded:!0,centered:!0,src:a.datingimages[l],fluid:!0})),c.a.createElement(b.a.Column,{width:2})),c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,null,c.a.createElement(O.a,{textAlign:"center",as:"h1"},a.bio))),c.a.createElement(b.a.Row,{style:{marginTop:"-10px"}},c.a.createElement(b.a.Column,{width:2}),c.a.createElement(b.a.Column,{width:4},c.a.createElement(b.a.Row,null,c.a.createElement(C.a,{fluid:!0,raised:!0},c.a.createElement(O.a,{as:"h3"},p[a.q1])))),c.a.createElement(b.a.Column,{width:4},c.a.createElement(b.a.Row,null,c.a.createElement(C.a,{compact:!0,raised:!0},c.a.createElement(O.a,{as:"h3"},p[a.q2])))),c.a.createElement(b.a.Column,{width:4},c.a.createElement(b.a.Row,null,c.a.createElement(C.a,{compact:!0,raised:!0},c.a.createElement(O.a,{as:"h3"},p[a.q3])))),c.a.createElement(b.a.Column,{width:2})),c.a.createElement(b.a.Row,{style:{marginTop:"-20px"}},c.a.createElement(b.a.Column,{width:2}),c.a.createElement(b.a.Column,{width:4},c.a.createElement(C.a,{textAlign:"center",centered:!0,raised:!0},c.a.createElement(O.a,{as:"h2"},a.ans1))),c.a.createElement(b.a.Column,{width:4},c.a.createElement(C.a,{centered:!0,raised:!0},c.a.createElement(O.a,{as:"h2"},a.ans2))),c.a.createElement(b.a.Column,{width:4},c.a.createElement(C.a,{centered:!0,raised:!0},c.a.createElement(O.a,{as:"h2"},a.ans3))),c.a.createElement(b.a.Column,{width:2}))))}),nt=(a(60),new p.a),ct=function(){var e=Object(d.f)(),t=e.id,a=e.access_token,s=e.refresh_token,r=c.a.useContext(Et),l=(r.replies,r.setReplies,r.artists,r.setArtists,r.messages,r.setMessages,r.orderedAttracted),u=(r.songs,r.setSongs,r.posts,r.setPosts,r.likes,r.setLikes,r.users),m=r.user,g=r.setUser,p=r.accesstoken,f=r.setAccesToken,h=r.refreshtoken,E=r.setRefreshToken,v="https://pure-harbor-26317.herokuapp.com/users/",O=Object(n.useState)(0),k=Object(o.a)(O,2),y=k[0],S=k[1];Object(n.useEffect)(function(){if(u&&!u[m.id]){var e={id:m.id,seen:"None",matched:"None",interested:"None"};z.child(t).update(e)}},[m,u,l]),Object(n.useEffect)(function(){console.log("WE AIN't GOT A USER"),m&&(console.log("WE GOT A USER"),M.requestPermission().then(function(){return console.log("have permission"),M.getToken()}).then(function(e){z.child(m.id).child("token").set(e)}).catch(function(e){console.log(e)}),M.onMessage(function(e){console.log("onmessage",e)}))},[m]),Object(n.useEffect)(function(){i.a.get("".concat(v).concat(t)).then(function(e){g(e.data[0])}).catch(function(e){console.log(e)})},[]),f(a),E(s),nt.setAccessToken(a);var w=Object(n.useState)(!1),x=Object(o.a)(w,2),C=(x[0],x[1],Object(n.useState)("")),A=Object(o.a)(C,2),T=A[0],R=(A[1],Object(n.useState)(!1)),N=Object(o.a)(R,2),I=N[0],W=(N[1],Object(n.useState)(!1)),L=Object(o.a)(W,2),B=L[0],H=(L[1],Object(n.useState)(!1)),D=Object(o.a)(H,2),q=(D[0],D[1]);return setTimeout(function(){q(!0)},3e3),c.a.createElement("div",{className:"App"},c.a.createElement("div",{style:{marginLeft:"30px",marginRight:"30px"}},c.a.createElement(b.a,{padded:!0},c.a.createElement(b.a.Row,{stretched:!0},c.a.createElement(b.a.Column,{width:3},m.favoritesongs&&l&&l.length>y?c.a.createElement(tt,{person:l[y]}):""),c.a.createElement(b.a.Column,{width:10},m&&m.location&&m.location.length>0&&l&&l.length>y?c.a.createElement(at,{increaseIndex:function(){return S(y+1)},person:l[y]}):m&&m.location&&m.location.length>0?"No matches yet.":c.a.createElement(Q.a,{as:j.b,to:"/signup/".concat(m.id,"/").concat(p,"/").concat(h)}," Complete your dating profile signup process! ")),c.a.createElement(b.a.Column,{width:3},m.favoriteartists&&l&&l.length>y?c.a.createElement(Ze,{person:l[y]}):"")))),I?c.a.createElement(d.a,{to:"/artist/".concat(T.id),push:!0}):"",B?c.a.createElement(d.a,{to:"/track/".concat(T.id),push:!0}):"")},st=(pe.a[900],Object(de.a)(function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://i.ibb.co/pQBpgMz/streaks-black-stripes-green-lines-3840x2160-c2-000000-32cd32-l2-113-113-a-135-f-1.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function rt(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=(t[0],t[1],st());return c.a.createElement(ie.a,{container:!0,component:"main",className:a.root},c.a.createElement(oe.a,null),c.a.createElement(ie.a,{item:!0,xs:!1,sm:4,md:7,className:a.image}),c.a.createElement(ie.a,{item:!0,xs:12,sm:8,md:5,component:le.a,elevation:6,square:!0},c.a.createElement("div",{className:a.paper,style:{display:"flex",justifyContent:"center",alignItems:"center",height:"85vh"}},c.a.createElement(se.a,{className:a.dark},c.a.createElement(me.a,{style:{color:"green"}})),c.a.createElement("a",{href:"https://pure-harbor-26317.herokuapp.com/login/dating"},c.a.createElement(re.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Log in Spotify")))))}var ot=function(){var e=c.a.useContext(Et),t=e.users,a=e.user,s=e.accesstoken,r=e.activeItem,l=e.setActiveItem,i=e.refreshtoken,u=e.setNoMatchModal,m=e.setNoMessagesModal,g=Object(n.useState)(""),p=Object(o.a)(g,2),f=(p[0],p[1],Object(n.useState)([])),h=Object(o.a)(f,2),E=(h[0],h[1],Object(n.useState)(!1)),v=Object(o.a)(E,2),O=(v[0],v[1],Object(n.useState)("")),j=Object(o.a)(O,2),k=(j[0],j[1],Object(n.useState)(!1)),y=Object(o.a)(k,2),S=y[0],w=(y[1],Object(n.useState)(!1)),x=Object(o.a)(w,2),C=x[0],A=(x[1],Object(n.useState)(!1)),T=Object(o.a)(A,2),R=(T[0],T[1],Object(n.useState)(!1)),N=Object(o.a)(R,2);N[0],N[1];function M(){return"messages"==r&&m(!0),"matches"==r&&u(!0),l("home"),console.log(a&&t&&t[a.id].chats),c.a.createElement(d.a,{to:"/dating/home/".concat(a.id,"/").concat(s,"/").concat(i),push:!0})}return c.a.createElement("div",{style:{marginBottom:"-10px"}},c.a.createElement(b.a,{centered:!0},c.a.createElement(b.a.Row,null,c.a.createElement(b.a.Column,{width:"16"},c.a.createElement(he.a,{inverted:!0,color:"purple",size:"large",widths:4},c.a.createElement(he.a.Item,{name:"HeartBeat"}),c.a.createElement(he.a.Item,{name:"home",active:"home"===r,onClick:function(){return l("home")}}),c.a.createElement(he.a.Item,{name:"messages",active:"messages"===r,onClick:function(){l("messages")}}),c.a.createElement(he.a.Item,{name:"Matches",active:"matches"===r,onClick:function(){return l("matches")}}))))),S?c.a.createElement(d.a,{to:"/",push:!0}):"",C?c.a.createElement(d.a,{to:"/settings",push:!0}):"","home"===r&&a&&s&&i?c.a.createElement(d.a,{to:"/dating/home/".concat(a.id,"/").concat(s,"/").concat(i),push:!0}):"","messages"===r&&a&&t&&t[a.id].chats?c.a.createElement(d.a,{to:"/dating/messages",push:!0}):"messages"===r?M():"","matches"===r&&a&&t&&t[a.id].matches?c.a.createElement(d.a,{to:"/dating/matches",push:!0}):"matches"===r?M():"")},lt=a(627),it=function(){var e=c.a.useContext(Et),t=e.nomatchmodal,a=e.setNoMatchModal;return c.a.createElement(lt.a,{open:t,onClose:function(){return a(!1)},basic:!0,size:"small"},c.a.createElement(O.a,{icon:"browser",content:"No messages."}),c.a.createElement(lt.a.Content,null,c.a.createElement("h3",null,"You don't have any matches yet.")),c.a.createElement(lt.a.Actions,null,c.a.createElement(Q.a,{color:"green",onClick:function(){return a(!1)},inverted:!0},c.a.createElement(K.a,{name:"checkmark"})," Got it")))},ut=function(){var e=c.a.useContext(Et),t=e.nomessagemodal,a=e.setNoMessagesModal;return c.a.createElement(lt.a,{open:t,onClose:function(){return a(!1)},basic:!0,size:"small"},c.a.createElement(O.a,{icon:"browser",content:"No messages."}),c.a.createElement(lt.a.Content,null,c.a.createElement("h3",null,"You don't have any messages yet.")),c.a.createElement(lt.a.Actions,null,c.a.createElement(Q.a,{color:"green",onClick:function(){return a(!1)},inverted:!0},c.a.createElement(K.a,{name:"checkmark"})," Got it")))},mt=c.a.memo(function(e){e.otherpersonid,e.chatid,e.lastMine,e.lastTheirs;var t=e.messageid,a=c.a.useContext(Et),n=a.user,s=a.messages,r=a.chats,o=a.allusers,l=s[t];l.content.length;return null!=n&&null!=s&&null!=r&&null!=o?c.a.createElement(b.a.Column,{width:5,floated:l.senderid==n.id?"right":"left"},c.a.createElement(C.a,{style:{"border-radius":"25px","max-width":"300px","word-wrap":"break-word"},inverted:!0,rounded:!0,basic:!0,color:l.senderid==n.id?"red":"blue"},c.a.createElement(O.a,{as:"h5",style:{marginTop:"-10px"}},l.content))):(console.log(n),console.log(s),console.log(r),console.log(o),console.log(n&&s&r&o),"loading")}),dt=function(e){var t=e.otherpersonid,a=e.chatid,s=c.a.useContext(Et),r=s.chats,l=s.messages,i=(s.allusers,s.user),u=Object.values(r[a].chats),m=Object(n.useState)(""),d=Object(o.a)(m,2),g=d[0],p=d[1],f=Object(n.useState)(""),h=Object(o.a)(f,2),E=h[0],v=h[1],O=!1,j=!1;r[a].person2,i.id;return Object(n.useEffect)(function(){for(var e=u.length-1;e>=0;e--)l[u[e]].senderid!=r[a].person1||O||(r[a].person1==i.id?p(u[e]):v(u[e]),O=!0),l[u[e]].senderid!=r[a].person2||j||(r[a].person2==i.id?p(u[e]):v(u[e]),j=!0)},[u,r,l]),c.a.createElement(x.a,null,c.a.createElement(b.a,null,u.map(function(e){return c.a.createElement(b.a.Row,{style:{marginTop:"1px",padding:"1px"}},c.a.createElement(mt,{key:e,lastMine:g,chatid:a,otherpersonid:t,lastTheirs:E,messageid:e}))})))},gt=function(e){var t=e.chatid,a=c.a.useContext(Et),s=a.allusers,r=a.user,l=a.chats,i=Object(n.useState)(""),u=Object(o.a)(i,2),m=u[0],d=u[1];return Object(n.useEffect)(function(){l[t].person1==r.id?d(s.find(function(e){return e.id==l[t].person2})):d(s.find(function(e){return e.id==l[t].person1}))},[s,l,t]),Object(n.useEffect)(function(){console.log(m)},[m]),c.a.createElement(C.a,null,"Start your first message with ",m.fname)},pt=function(e){var t=e.chatid,a=c.a.useContext(Et),s=(a.chats,a.user),r=Object(n.useState)(""),l=Object(o.a)(r,2),i=l[0],u=l[1],m=Object(n.useRef)();function d(e){"Enter"===e.key&&function(){var e=B.push({content:i,senderid:s.id,chatid:t,createdAt:{".sv":"timestamp"}}).getKey();q.child(t).child("chats").push(e),u("")}()}return c.a.createElement("div",{fluid:!0},c.a.createElement(G.a,{fluid:!0,onKeyUp:function(e){return d(e)},ref:m,id:"textareareply",value:i,onChange:function(e){u(e.target.value)},rows:2,placeholder:"Write a message..."}))},ft=a(224),ht=a.n(ft),bt=function(){var e=c.a.useContext(Et),t=e.user,a=e.users,s=e.allusers,r=e.chats,l=(e.messages,Object(n.useState)("")),i=Object(o.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),g=Object(o.a)(d,2),p=g[0],f=g[1],h=Object(n.useState)(""),E=Object(o.a)(h,2),O=E[0],j=E[1];return Object(n.useEffect)(function(){t&&a&&f(Object.values(a[t.id].chats))},[t,a]),Object(n.useEffect)(function(){p.length>0&&m(p[0])},[p]),Object(n.useEffect)(function(){r[u]&&(r[u].person2==t.id?(j(r[u].person1),console.log(r[u].person1)):(j(r[u].person2),console.log(r[u].person2)))},[r,u]),Object(n.useEffect)(function(){var e=document.getElementById("myDivID");e&&(console.log("NO ELEMENT"),window.scrollTo(0,e.offsetHeight)),ht()("#myDivID").scrollTop(ht()("#myDivID").scrollHeight)},[]),t&&a&&r&&s&&u?c.a.createElement("div",null,c.a.createElement(C.a,null,c.a.createElement(b.a,{columns:2},c.a.createElement(b.a.Column,{width:3},c.a.createElement(he.a,{pointing:!0,vertical:!0},p.map(function(e){var a=r[e].person2==t.id?r[e].person1:r[e].person2,n=s.find(function(e){return e.id==a});return c.a.createElement(he.a.Item,{name:n.fname,active:u===e,onClick:function(){return m(e)}})}))),c.a.createElement(b.a.Column,{width:13},c.a.createElement(C.a,{fluid:!0},s&&O?c.a.createElement(v.a,{avatar:!0,size:"small",src:s.find(function(e){return e.id==O}).datingimages[0]}):"",s&&O?c.a.createElement("span",{style:{marginLeft:"10px",fontSize:"15"}},s.find(function(e){return e.id==O}).fname):""),c.a.createElement(C.a,{id:"myDivID",style:{minHeight:"450px",maxHeight:"450px","overflow-y":"auto",scrollTop:"450px"}},r[u].chats?c.a.createElement(dt,{otherpersonid:O,chatid:u}):c.a.createElement(gt,{chatid:u})),c.a.createElement(C.a,{fluid:!0},c.a.createElement(pt,{chatid:u})))))):c.a.createElement("div",null,"Not loaded")},Et=(new p.a,c.a.createContext());var vt=function(){function e(e){return c.a.createElement("div",null,c.a.createElement(ae,{accesstoken:Z,id:Y.id}),c.a.createElement(fe.a.Pushable,{as:C.a},c.a.createElement(be,null),c.a.createElement(fe.a.Pusher,null,e)))}function t(e){return c.a.createElement("div",null,c.a.createElement(ot,{accesstoken:Z,id:Y.id}),c.a.createElement(it,null),c.a.createElement(ut,null),e)}var a=Object(n.useState)(""),s=Object(o.a)(a,2),r=s[0],l=s[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),g=m[0],p=m[1],f=Object(n.useState)(""),h=Object(o.a)(f,2),b=h[0],E=h[1],v=Object(n.useState)(""),O=Object(o.a)(v,2),k=O[0],S=O[1],x=Object(n.useState)(""),A=Object(o.a)(x,2),T=A[0],R=A[1],N=Object(n.useState)(""),M=Object(o.a)(N,2),U=M[0],P=M[1],J=Object(n.useState)(""),_=Object(o.a)(J,2),Q=_[0],K=_[1],F=Object(n.useState)(""),G=Object(o.a)(F,2),Y=G[0],V=G[1],$=Object(n.useState)(""),X=Object(o.a)($,2),Z=X[0],ee=X[1],te=Object(n.useState)(""),ne=Object(o.a)(te,2),se=ne[0],re=ne[1],oe=Object(n.useState)(!1),le=Object(o.a)(oe,2),ie=le[0],ue=le[1],me=Object(n.useState)(""),de=Object(o.a)(me,2),ge=de[0],pe=de[1],he=Object(n.useState)(""),Ee=Object(o.a)(he,2),ve=Ee[0],Oe=(Ee[1],Object(n.useState)("")),je=Object(o.a)(Oe,2),ke=je[0],ye=je[1],we=Object(n.useState)(""),xe=Object(o.a)(we,2),Ce=xe[0],Ae=xe[1],Te=Object(n.useState)(!1),Re=Object(o.a)(Te,2),Ne=Re[0],Me=Re[1],Ie=Object(n.useState)(!1),ze=Object(o.a)(Ie,2),We=ze[0],Le=ze[1],Be=Object(n.useState)("home"),He=Object(o.a)(Be,2),De=He[0],qe=He[1];c.a.useEffect(function(){Y&&localStorage.setItem("user",JSON.stringify(Y))},[Y]),c.a.useEffect(function(){var e=localStorage.getItem("user");e&&V(JSON.parse(e))},[]);var Ue="https://pure-harbor-26317.herokuapp.com/users/";return Object(n.useEffect)(function(){i.a.get("".concat(Ue)).then(function(e){pe(e.data)}).catch(function(e){console.log(e)})},[Y]),Object(n.useEffect)(function(){var e=function(e){e.val()&&Ae(e.val())};return z.on("value",e,function(e){return alert(e)}),function(){z.off("value",e)}},[]),Object(n.useEffect)(function(){var e=function(e){e.val()&&p(e.val())};return I.on("value",e,function(e){return alert(e)}),function(){I.off("value",e)}},[]),Object(n.useEffect)(function(){var e=function(e){e.val()&&K(e.val())};return D.on("value",e,function(e){return alert(e)}),function(){D.off("value",e)}},[]),Object(n.useEffect)(function(){var e=function(e){e.val()&&E(e.val())};return B.on("value",e,function(e){return alert(e)}),function(){B.off("value",e)}},[]),Object(n.useEffect)(function(){var e=function(e){e.val()&&l(e.val())};return q.on("value",e,function(e){return alert(e)}),function(){q.off("value",e)}},[]),Object(n.useEffect)(function(){var e=function(e){e.val()&&P(e.val())};return H.on("value",e,function(e){return alert(e)}),function(){H.off("value",e)}},[]),Object(n.useEffect)(function(){var e=function(e){e.val()&&S(e.val())};return W.on("value",e,function(e){return alert(e)}),function(){W.off("value",e)}},[]),Object(n.useEffect)(function(){var e=function(e){e.val()&&R(e.val())};return L.on("value",e,function(e){return alert(e)}),function(){L.off("value",e)}},[]),Object(n.useEffect)(function(){function e(e,t){var a=e.favoritesongs,n=t.favoritesongs,c=e.favoriteartists,s=t.favoriteartists,r=a.filter(function(e){return n.includes(e)}),o=c.filter(function(e){return s.includes(e)});return r.length+o.length}var t=ge;if(console.log(ge),ge&&Ce&&Y&&Ce[Y.id]){console.log(t.filter(function(e){return!Object.values(Ce[Y.id].seen).includes(e.id)&&e.id!=Y.id}));var a=t.filter(function(e){return!Object.values(Ce[Y.id].seen).includes(e.id)&&e.id!=Y.id}).sort(function(t,a){Y.location[0],Y.location[1];var n=e(t,Y),c=e(a,Y);return Math.min(c,1)-Math.min(n,1)});console.log(a),ye(a)}},[Y,Ce,ge]),c.a.createElement(j.a,null,c.a.createElement(Et.Provider,{value:{activeItem:De,setActiveItem:qe,nomatchmodal:Ne,setNoMatchModal:Me,nomessagemodal:We,setNoMessagesModal:Le,replies:U,users:Ce,allusers:ge,attractedUsers:ve,orderedAttracted:ke,setReplies:P,artists:g,setArtists:p,messages:b,setMessages:E,songs:k,setSongs:S,posts:T,setPosts:R,likes:Q,setLikes:K,user:Y,setUser:V,chats:r,visible:ie,setVisible:ue,accesstoken:Z,setAccesToken:ee,refreshtoken:se,setRefreshToken:re}},c.a.createElement(d.b,{exact:!0,path:"/signup/:id/:access_token/:refresh_token",render:function(){return c.a.createElement(Pe,null)}}),c.a.createElement(d.b,{exact:!0,path:"/",render:function(){return c.a.createElement(d.a,{to:"/dating"})}}),c.a.createElement(d.b,{exact:!0,path:"/settings",render:function(){return e(c.a.createElement(Ge,null))}}),c.a.createElement(d.b,{exact:!0,path:"/home/:id/:access_token/:refresh_token",render:function(){return e(c.a.createElement(ce,null))}}),c.a.createElement(d.b,{exact:!0,path:"/artist/:artistid",render:function(){return e(c.a.createElement(Qe,null))}}),c.a.createElement(d.b,{exact:!0,path:"/track/:trackid",render:function(){return e(c.a.createElement(Fe,null))}}),c.a.createElement(d.b,{exact:!0,path:"/tracks",render:function(){return e(c.a.createElement(w,null))}}),c.a.createElement(d.b,{exact:!0,path:"/artists",render:function(){return e(c.a.createElement(y,null))}}),c.a.createElement(d.b,{exact:!0,path:"/map",render:function(){return c.a.createElement(Se,null)}}),c.a.createElement(d.b,{exact:!0,path:"/dating/home/:id/:access_token/:refresh_token",render:function(){return t(c.a.createElement(ct,null))}}),c.a.createElement(d.b,{exact:!0,path:"/dating",render:function(){return c.a.createElement(rt,null)}}),c.a.createElement(d.b,{exact:!0,path:"/dating/messages",render:function(){return t(c.a.createElement(bt,null))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(vt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[363,1,2]]]);
//# sourceMappingURL=main.da076d13.chunk.js.map